:root {
  --color-Brand-Main: #4356f2;
  --color-Gray-10: #e3e5e8;
  --color-Gray-20: #c6cad2;
  --color-Gray-70: #3f485a;
  --color-Borders-Main: #dbdbdb;
  --color-Text-Main: #3f485a;
  --color-White: #fff;
}

body,html{margin:0;padding:0;height:100%;overflow:hidden;font-family:Inter,sans-serif;color:var(--color-Text-Main);}
#container{display:flex;height:100%;}
#slotsPanel{width:20%;background:var(--color-Gray-10);padding:10px;display:flex;flex-direction:column;}
#objectsPanel{width:20%;background:var(--color-Gray-10);overflow-y:auto;padding:10px;}
#slotsPanel{border-right:1px solid var(--color-Borders-Main);}
#variantControls{display:flex;gap:5px;margin-bottom:10px;align-items:center;}
#variantControls select{flex:1;}
#stepControls{display:flex;justify-content:center;align-items:center;gap:8px;margin-bottom:10px;}
#objectsPanel{border-left:1px solid var(--color-Borders-Main);}
#viewer{flex:1;position:relative;}
canvas{display:block;}
#bottomBtns{position:absolute;bottom:10px;left:50%;transform:translateX(-50%);}
#bottomBtns button{margin:0 5px;}
#transformBtns{position:absolute;top:10px;left:50%;transform:translateX(-50%);}
#transformBtns button{margin:0 5px;}
#coordsPanel{position:absolute;top:10px;right:10px;display:none;flex-direction:column;gap:5px;}
#coordsPanel input{width:60px;text-align:center;background:var(--color-White);border:1px solid var(--color-Borders-Main);border-radius:4px;padding:4px;color:var(--color-Text-Main);}
#coordsPanel input::-webkit-outer-spin-button,#coordsPanel input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}
#coordsPanel input[type=number]{-moz-appearance:textfield;}
#objectActions{display:flex;gap:5px;margin-bottom:10px;}
#slotOptions{display:flex;align-items:center;gap:5px;margin-bottom:10px;}
#slotOptions label{display:flex;align-items:center;gap:4px;}
#objectModal{position:fixed;top:10%;left:50%;transform:translateX(-50%);display:none;z-index:10;}
#objectModal .modal-box{background:var(--color-White);border:1px solid var(--color-Borders-Main);width:60vw;max-height:80vh;padding:20px;overflow:auto;position:relative;}
#modalList{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;max-height:60vh;overflow:auto;}
#objectModal .modal-card{display:flex;flex-direction:column;gap:8px;cursor:pointer;}
#objectModal .modal-card .thumb{position:relative;width:100%;aspect-ratio:10/7;border-radius:6px;overflow:hidden;background:var(--color-White);}
#objectModal .modal-card .thumb img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:contain;}
#objectModal .modal-card .overlay{position:absolute;inset:0;pointer-events:none;background:rgba(0,0,0,0.06);}
#objectModal .modal-card .overlay::after{content:'';position:absolute;inset:0;opacity:0;transition:opacity .2s;background:linear-gradient(180deg,rgba(0,0,0,0.1) 65.38%,rgba(2,2,2,0.6) 100%);}
#objectModal .modal-card:hover .overlay::after{opacity:1;}
#objectModal .modal-card .thumb p{position:absolute;bottom:5px;left:5px;color:#fff;font-weight:bold;font-size:16px;max-width:70%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;opacity:0;transition:opacity .2s;}
#objectModal .modal-card:hover .thumb p{opacity:1;}
#objectModal .modal-card .info{display:flex;justify-content:space-between;gap:8px;padding:0 4px;font-size:12px;}
#objectModal .modal-card .info .owner{display:flex;align-items:center;gap:6px;flex:1;min-width:0;}
#objectModal .modal-card .info .avatar{display:flex;align-items:center;justify-content:center;width:24px;height:24px;border-radius:50%;overflow:hidden;background:#ddd;flex-shrink:0;font-size:12px;font-weight:bold;color:#555;}
#objectModal .modal-card .info .owner p{font-weight:600;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
#objectModal .modal-card .info .counts{display:flex;gap:8px;flex-shrink:0;align-items:center;}
#objectModal .modal-card .info .counts svg{width:16px;height:16px;fill:#777;}
#objectModal .modal-card .info .counts p{margin-left:2px;font-size:11px;color:#777;}
#objectModal .modal-card .info .counts .count{display:flex;align-items:center;}
#objectModal .pagination{display:flex;justify-content:center;margin-top:10px;}
#closeModal{display:block;margin:10px auto 0;}

#stepsModal{position:fixed;top:10%;left:50%;transform:translateX(-50%);display:none;z-index:10;}
#stepsModal .modal-box{background:var(--color-White);border:1px solid var(--color-Borders-Main);padding:20px;width:40vw;max-height:70vh;overflow:auto;}
#stepsList{display:flex;flex-direction:column;gap:10px;margin-bottom:10px;}
.step-row{display:flex;flex-direction:column;gap:4px;border:1px solid var(--color-Borders-Main);padding:8px;border-radius:4px;}
.step-row .slot-checks{display:flex;flex-wrap:wrap;gap:6px;}
.step-row .step-header{display:flex;align-items:center;gap:8px;margin-bottom:4px;}
#closeSteps{display:block;margin:10px auto 0;}
#envModal{position:fixed;top:20%;left:50%;transform:translateX(-50%);display:none;z-index:10;}
#envModal .modal-box{background:var(--color-White);border:1px solid var(--color-Borders-Main);padding:20px;}
#closeEnv{display:block;margin:10px auto 0;}
#varModal{position:fixed;top:20%;left:50%;transform:translateX(-50%);display:none;z-index:10;}
#varModal .modal-box{background:var(--color-White);border:1px solid var(--color-Borders-Main);padding:20px;width:40vw;max-height:60vh;overflow:auto;}
#varList{display:flex;flex-direction:column;gap:8px;margin-bottom:10px;}
.var-row{display:flex;align-items:center;gap:8px;}
.var-row label{flex:1;}
#closeVar{display:block;margin:10px auto 0;}
#viewModal{position:fixed;top:20%;left:50%;transform:translateX(-50%);display:none;z-index:10;}
#viewModal .modal-box{background:var(--color-White);border:1px solid var(--color-Borders-Main);padding:20px;}
#closeView{display:block;margin:10px auto 0;}
.obj-card{border:1px solid var(--color-Borders-Main);padding:5px;margin-bottom:5px;border-radius:4px;}
.obj-card.selected{background:var(--color-Gray-20);}
.material-list{display:flex;flex-wrap:wrap;}
.material-list button{border:none;background:none;padding:0;margin:2px;cursor:pointer;}
.material-list button.selected{outline:2px solid var(--color-Brand-Main);}
.material-list img{width:40px;height:40px;object-fit:cover;border-radius:2px;}
button{background:var(--color-Gray-10);border:1px solid var(--color-Borders-Main);border-radius:4px;padding:4px 8px;color:var(--color-Text-Main);transition:background .2s,color .2s;}
button:hover{background:var(--color-Brand-Main);color:var(--color-White);}
button.active{background:var(--color-Brand-Main);color:var(--color-White);}
#slots{list-style:none;padding:0;margin:0;flex:1;overflow-y:auto;}
.slot{display:flex;align-items:center;justify-content:space-between;margin-bottom:5px;cursor:pointer;padding:2px 4px;border-radius:4px;width:100%;}
.slot.selected{background:var(--color-Gray-20);}
.slot-actions{display:flex;gap:5px;}
.slot-actions button{margin-left:0;}
.action-btn{background:var(--color-White);}
.action-btn:hover,.action-btn:active{background:var(--color-Brand-Main);color:var(--color-White);}
#addSlotBtn{display:block;width:100%;margin-bottom:10px;}
#envRow{display:flex;gap:5px;margin-top:auto;}
#envRow button{flex:1;}
#gridBtn{position:absolute;bottom:10px;right:10px;}
#outlineBtn{position:absolute;bottom:10px;right:80px;}
.hide-btn.active{background:var(--color-Gray-70);color:var(--color-White);}
#versionLabel{position:fixed;top:4px;right:8px;font-size:12px;color:var(--color-Gray-60);}
#loadingOverlay{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;z-index:20;}
#loadingOverlay .loading-box{text-align:center;color:var(--color-White);}
#loadingOverlay .progress{width:200px;height:8px;background:var(--color-Gray-20);margin-top:10px;border-radius:4px;overflow:hidden;}
#progressBar{height:100%;width:0;background:var(--color-Brand-Main);}

@media (max-width:768px){
  #container{flex-direction:column;}
  #viewer{flex:none;height:66vh;}
  #slotsPanel{order:2;width:100%;height:34vh;border-right:none;border-top:1px solid var(--color-Borders-Main);}
  #objectsPanel{display:none;}
  #slots{padding:10px;}
  .slot-mobile summary{display:flex;justify-content:space-between;align-items:center;padding:4px;cursor:pointer;}
  .slot-mobile summary::-webkit-details-marker{display:none;}
  .slot-mobile{border-bottom:1px solid var(--color-Borders-Main);}
  .slot-mobile .obj-card{margin:5px 0;}
}
