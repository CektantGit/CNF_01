:root {
  --color-Brand-Main: #4356f2;
  --color-Gray-10: #e3e5e8;
  --color-Gray-20: #c6cad2;
  --color-Gray-70: #3f485a;
  --color-Borders-Main: #dbdbdb;
  --color-Text-Main: #3f485a;
  --color-White: #fff;
  --color-check: #22C55E;
}

body,html{margin:0;padding:0;height:100%;overflow:hidden;font-family:Inter,sans-serif;color:var(--color-Text-Main);background:var(--color-Gray-10);}
#container{display:flex;height:100%;}
#slotsPanel{width:280px;display:flex;flex-direction:column;gap:12px;padding:16px;box-sizing:border-box;background:var(--color-Gray-10);border-right:1px solid var(--color-Borders-Main);}
#viewerSection{flex:1;display:flex;position:relative;background:#0f1015;}
#viewer{flex:1;position:relative;background:#0f1015;}
#viewer canvas{display:block;width:100%;height:100%;}
#bottomBtns{position:absolute;bottom:10px;left:50%;transform:translateX(-50%);display:flex;gap:10px;}
#bottomBtns button{margin:0;}
#transformBtns{position:absolute;top:10px;left:50%;transform:translateX(-50%);display:flex;gap:10px;}
#coordsPanel{position:absolute;top:10px;right:10px;display:none;flex-direction:column;gap:5px;}
#coordsPanel input{width:60px;text-align:center;background:var(--color-White);border:1px solid var(--color-Borders-Main);border-radius:4px;padding:4px;color:var(--color-Text-Main);}
#coordsPanel input::-webkit-outer-spin-button,#coordsPanel input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}
#coordsPanel input[type=number]{-moz-appearance:textfield;}
#objectActions{display:flex;gap:5px;margin-bottom:10px;}
#slotOptions{display:flex;flex-direction:column;align-items:stretch;gap:12px;margin-bottom:10px;}
#tabButtons{position:absolute;top:50%;right:12px;transform:translateY(-50%);display:flex;flex-direction:column;gap:12px;padding:0;background:transparent;border:none;pointer-events:none;z-index:3;}
.tab-button{width:48px;height:48px;border-radius:12px;border:1px solid rgba(255,255,255,0.28);background:rgba(15,16,21,0.78);color:#f2f4f8;font-weight:600;letter-spacing:1px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .2s,border-color .2s,color .2s,opacity .2s;pointer-events:auto;}
.tab-button.active{background:var(--color-Brand-Main);border-color:var(--color-Brand-Main);color:var(--color-White);}
.tab-button:not(:disabled):hover{background:rgba(67,86,242,0.85);border-color:var(--color-Brand-Main);}
.tab-button:disabled{opacity:0.45;cursor:default;}
#sidePanel{width:320px;background:var(--color-Gray-10);border-left:1px solid var(--color-Borders-Main);height:100%;display:flex;flex-direction:column;overflow:hidden;}
.panel{display:none;flex:1;overflow-y:auto;padding:16px;gap:16px;box-sizing:border-box;flex-direction:column;}
.panel.active{display:flex;}
.panel-section{display:flex;flex-direction:column;gap:12px;}
#panel-info{gap:20px;}
#panel-info .primary{background:var(--color-Brand-Main);color:var(--color-White);border-color:var(--color-Brand-Main);width:100%;padding:10px 12px;font-weight:600;border-radius:10px;}
#panel-info .primary:hover{background:#3244d0;border-color:#3244d0;}
#panel-info .info-grid{display:flex;flex-direction:column;gap:12px;padding:12px;border:1px solid var(--color-Borders-Main);border-radius:10px;background:var(--color-White);}
#panel-info .info-field{display:flex;flex-direction:column;gap:4px;font-size:14px;}
#panel-info .info-label{font-weight:600;color:var(--color-Gray-70);}
#panel-info .info-value{font-family:'Inter',sans-serif;background:var(--color-White);border:1px solid var(--color-Borders-Main);border-radius:6px;padding:6px 8px;word-break:break-all;color:var(--color-Text-Main);}
#panel-info .info-edit{display:flex;flex-direction:column;gap:6px;font-weight:600;}
#panel-info .info-edit input,#panel-info .info-edit textarea{font:inherit;padding:8px 10px;border:1px solid var(--color-Borders-Main);border-radius:8px;background:var(--color-White);resize:vertical;min-height:40px;}
#panel-info .info-edit textarea{min-height:96px;}
#panel-info .info-edit input:focus,#panel-info .info-edit textarea:focus{outline:2px solid rgba(67,86,242,0.35);}
#panel-slot{gap:16px;}
#panel-slot .panel-section:first-child{flex:1;display:flex;flex-direction:column;gap:12px;}
#slotDetail{display:flex;flex-direction:column;gap:10px;flex:1;}
#objects{display:flex;flex-direction:column;gap:12px;}
#stepControls{display:flex;justify-content:center;align-items:center;gap:8px;flex-wrap:wrap;}
#addSlotBtn{display:block;width:100%;}
#slots{list-style:none;padding:0;margin:0;flex:1;overflow-y:auto;background:var(--color-White);border:1px solid var(--color-Borders-Main);border-radius:8px;padding:6px;}
.slot{display:flex;align-items:center;justify-content:space-between;margin-bottom:5px;cursor:pointer;padding:6px 8px;border-radius:6px;width:100%;background:var(--color-White);}
.slot:last-child{margin-bottom:0;}
.slot.selected{background:var(--color-Gray-20);}
.slot-actions{display:flex;gap:5px;}
.slot-actions button{margin-left:0;}
.action-btn{background:var(--color-White);}
.action-btn:hover,.action-btn:active{background:var(--color-Brand-Main);color:var(--color-White);}
.scroll-list{border:1px solid var(--color-Borders-Main);border-radius:8px;background:var(--color-White);max-height:200px;overflow-y:auto;padding:4px 0;}
.variant-actions{display:flex;gap:8px;margin-bottom:8px;}
.variant-row{padding:8px 12px;border-bottom:1px solid var(--color-Borders-Main);cursor:pointer;display:flex;align-items:center;gap:8px;}
.variant-row:last-child{border-bottom:none;}
.variant-row.selected{background:var(--color-Gray-20);}
.variant-row input{flex:1;border:none;outline:none;background:transparent;font:inherit;color:inherit;}
details{border:1px solid var(--color-Borders-Main);border-radius:10px;background:var(--color-White);margin-bottom:12px;overflow:hidden;}
details:last-child{margin-bottom:0;}
summary{padding:10px 14px;font-weight:600;cursor:pointer;}
.details-body{padding:12px;display:flex;flex-direction:column;gap:12px;}
.button-text-section{display:none;}
.button-text-group{display:flex;flex-direction:column;gap:8px;}
.button-text-list{display:flex;flex-direction:column;gap:8px;}
.button-text-row{display:flex;align-items:center;gap:12px;}
.button-text-preview{width:48px;height:48px;border-radius:8px;overflow:hidden;flex-shrink:0;border:1px solid var(--color-Borders-Main);display:flex;align-items:center;justify-content:center;background:var(--color-Gray-20);color:var(--color-Gray-70);font-weight:600;font-size:14px;text-transform:uppercase;}
.button-text-preview img{width:100%;height:100%;object-fit:cover;}
.button-text-preview.empty{background:var(--color-Gray-20);}
.button-text-row input{flex:1;min-width:0;font:inherit;padding:8px 10px;border:1px solid var(--color-Borders-Main);border-radius:8px;background:var(--color-White);}
.button-text-row input:focus{outline:2px solid rgba(67,86,242,0.35);}
.button-text-empty{font-size:13px;color:var(--color-Gray-70);}
#stepsList{display:flex;flex-direction:column;gap:10px;}
.step-row{display:flex;flex-direction:column;gap:4px;border:1px solid var(--color-Borders-Main);padding:8px;border-radius:6px;background:var(--color-White);}
.step-row .slot-checks{display:flex;flex-wrap:wrap;gap:6px;}
.step-row .step-header{display:flex;align-items:center;gap:8px;margin-bottom:4px;}
.step-row input[type="text"],.step-row input[type="number"],.step-row input[type="checkbox"]{font:inherit;}
#panel-cam .details-body{gap:16px;}
#panel-cam .details-body label{display:flex;flex-direction:column;gap:4px;font-weight:600;}
#panel-cam .details-body label input{width:100%;max-width:140px;}
.toggle-row{display:flex;align-items:center;justify-content:space-between;gap:16px;font-weight:600;}
.toggle-switch{position:relative;width:46px;height:24px;display:inline-flex;align-items:center;}
.toggle-switch input{opacity:0;width:0;height:0;}
.toggle-switch .slider{position:absolute;inset:0;background:var(--color-Gray-20);border-radius:999px;transition:background .2s;}
.toggle-switch .slider::after{content:'';position:absolute;top:3px;left:3px;width:18px;height:18px;border-radius:50%;background:var(--color-White);transition:transform .2s;box-shadow:0 1px 3px rgba(0,0,0,0.35);}
.toggle-switch input:checked + .slider{background:var(--color-Brand-Main);}
.toggle-switch input:checked + .slider::after{transform:translateX(22px);}
#panel-world .details-body{gap:16px;}
#panel-world .details-body label{display:flex;flex-direction:column;gap:4px;font-weight:600;}
#panel-world .details-body label input{width:100%;}
.world-actions{display:flex;gap:8px;margin:12px 0;}
.env-info{font-size:14px;color:var(--color-Gray-70);min-height:20px;}
#objectModal{position:fixed;top:10%;left:50%;transform:translateX(-50%);display:none;z-index:10;}
#objectModal .modal-box{background:var(--color-White);border:1px solid var(--color-Borders-Main);width:60vw;max-height:80vh;padding:20px;overflow:auto;position:relative;}
#modalList{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;max-height:60vh;overflow:auto;}
#objectModal .modal-card{display:flex;flex-direction:column;gap:8px;cursor:pointer;}
#objectModal .modal-card .thumb{position:relative;width:100%;aspect-ratio:10/7;border-radius:6px;overflow:hidden;background:var(--color-White);}
#objectModal .modal-card .thumb img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;}
#objectModal .modal-card .overlay{position:absolute;inset:0;pointer-events:none;background:rgba(0,0,0,0.06);}
#objectModal .modal-card .overlay::after{content:'';position:absolute;inset:0;opacity:0;transition:opacity .2s;background:linear-gradient(180deg,rgba(0,0,0,0.1) 65.38%,rgba(2,2,2,0.6) 100%);}
#objectModal .modal-card:hover .overlay::after{opacity:1;}
#objectModal .modal-card .thumb p{position:absolute;bottom:5px;left:5px;color:#fff;font-weight:bold;font-size:16px;max-width:70%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;opacity:0;transition:opacity .2s;}
#objectModal .modal-card:hover .thumb p{opacity:1;}
#objectModal .modal-card .info{display:flex;justify-content:space-between;gap:8px;padding:0 4px;font-size:12px;}
#objectModal .modal-card .info .owner{display:flex;align-items:center;gap:6px;flex:1;min-width:0;}
#objectModal .modal-card .info .avatar{display:flex;align-items:center;justify-content:center;width:24px;height:24px;border-radius:50%;overflow:hidden;background:#ddd;flex-shrink:0;font-size:12px;font-weight:bold;color:#555;}
#objectModal .modal-card .info .owner p{font-weight:600;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
#objectModal .modal-card .info .counts{display:flex;gap:8px;flex-shrink:0;align-items:center;}
#objectModal .modal-card .info .counts svg{width:16px;height:16px;fill:#777;}
#objectModal .modal-card .info .counts p{margin-left:2px;font-size:11px;color:#777;}
#objectModal .modal-card .info .counts .count{display:flex;align-items:center;}
#objectModal .pagination{display:flex;justify-content:center;margin-top:10px;}
#closeModal{display:block;margin:10px auto 0;}

.obj-card{border:1px solid var(--color-Borders-Main);padding:5px;margin-bottom:5px;border-radius:4px;}
.obj-card.selected{background:var(--color-Gray-20);}
.material-list{display:flex;flex-wrap:wrap;}
.material-list button{border:none;background:none;padding:0;margin:2px;cursor:pointer;position:relative;}
.material-list img{width:40px;height:40px;object-fit:cover;border-radius:2px;}
.material-list button .check{position:absolute;top:6px;right:6px;width:24px;height:24px;border-radius:999px;background:var(--color-check);display:flex;align-items:center;justify-content:center;}
.material-list button .check img{width:14px;height:14px;filter:invert(1) brightness(2);}
button{background:var(--color-Gray-10);border:1px solid var(--color-Borders-Main);border-radius:4px;padding:4px 8px;color:var(--color-Text-Main);transition:background .2s,color .2s;}
button:hover{background:var(--color-Brand-Main);color:var(--color-White);}
button.active{background:var(--color-Brand-Main);color:var(--color-White);}
#gridBtn{position:absolute;bottom:10px;right:10px;}
#outlineBtn{position:absolute;bottom:10px;right:80px;}
.hide-btn.active{background:var(--color-Gray-70);color:var(--color-White);}
#versionLabel{position:fixed;top:4px;right:8px;font-size:12px;color:var(--color-Gray-60);}
#loadingOverlay{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;z-index:20;}
#loadingOverlay .loading-box{display:flex;flex-direction:column;align-items:center;text-align:center;color:var(--color-White);}
#loadingOverlay .loading-box p{margin:0 0 8px;}
#loadingOverlay .progress{width:200px;height:8px;background:var(--color-Gray-20);margin-top:10px;border-radius:4px;overflow:hidden;}
#progressBar{height:100%;width:0;background:var(--color-Brand-Main);}

@media (max-width:768px){
  #container{flex-direction:column;}
  #viewerSection{order:1;flex-direction:column;height:60vh;}
  #slotsPanel{order:2;width:100%;height:40vh;border-right:none;border-top:1px solid var(--color-Borders-Main);padding:12px;}
  #tabButtons{position:static;transform:none;flex-direction:row;justify-content:center;gap:8px;margin:8px auto 0;width:auto;pointer-events:auto;}
  #tabButtons .tab-button{flex:none;width:48px;height:48px;}
  #sidePanel{order:3;width:100%;height:40vh;}
  .panel{padding:12px;}
  #slots{padding:10px;}
  .slot-mobile summary{display:flex;justify-content:space-between;align-items:center;padding:6px;cursor:pointer;}
  .slot-mobile summary::-webkit-details-marker{display:none;}
  .slot-mobile{border-bottom:1px solid var(--color-Borders-Main);}
  .slot-mobile .obj-card{margin:5px 0;}
}
